# 技术规格说明书



## 一、技术栈

### 1. 前端

* 语言：HTML + CSS + JavaScript
* 框架：Vue.js
* 运行环境：Web浏览器

### 2. 后端

* 语言：C#
* 网关：Nginx
* 框架：[ASP.NET Core](https://docs.microsoft.com/zh-cn/aspnet/core/?view=aspnetcore-5.0)、[Bot Framework for .NET](https://docs.microsoft.com/zh-cn/azure/bot-service/index-bf-sdk?view=azure-bot-service-4.0)、[Entity Framework Core]([Overview of Entity Framework Core - EF Core | Microsoft Docs](https://docs.microsoft.com/en-us/ef/core/))
* 运行环境：Linux服务器





## 二、软件的总体框架

### 1. 包含的子系统

#### 1.1 视图层

##### 1.1.1 承担的功能任务

软件系统与外界进行交互的主体。

主要获取用户输入并向后端发送请求、对后端提供的模型进行渲染并提供给用户、接收后端提供的服务并响应给用户。

这部分要求提供兼容移动端以及网页端的web。

##### 1.1.2 包含的模块

1. 账号管理页面

   向用户提供包括账号注册，账号找回等账号维护功能。

2. 机器人问答页面

   向用户提供与机器人交互的主要页面。提供的功能包括回答用户提问，提示用户精确提问内容，引导用户将问题发送到提问去。

3. 用户问答页面

   向用户提供提出问题、浏览问题、回答问题以及其他一些与问答有关的交互的功能。

#### 1.2 控制层

##### 1.2.1 承担的功能任务

接收由前端（视图层）发来的请求，并进行安全控制，包括权限检查、错误处理等。

对筛选后的请求进行分发，将它们派发到服务层中的不同服务中去。同时也接收服务层产生的响应，并向前端进行转发。

##### 1.2.2 包含的模块

1. 网关

   网关模块使用Nginx进行反向代理。这样做的好处包括：

   + 使得内部服务器对外部网络来说是透明的，进而提高内部服务器的安全性。
   + 可以在反向代理中设置缓冲，提高用户的访问速度。
   + 通过配置访问控制策略，可以过滤恶意骚扰与访问。

2. 控制器

   从网关获取转发来的用户请求，对请求进行分析检查，对于有问题的请求进行报错。否则，在分析后将其指派给服务层中的不同服务；同时接收汇总服务层产生的响应并转发给网关，通过网关把响应交付给用户。

#### 1.3 服务层

##### 1.3.1 承担的功能任务

软件系统中负责处理用户请求的主要区域，包含主要的处理逻辑。

从控制层接收请求，对请求进行处理，并根据数据层提供的数据来对请求进行相应的反馈。

##### 1.3.2 包含的模块

1. 用户管理服务

   用户管理服务对应前端的用户管理页面。处理用户有关维护账户信息的请求，包括：创建账户、找回账户、账户登录与退出、变更账户信息等。根据请求的不同情形做出不同的回应，并再向数据层请求更新数据库内容。

2. BOT服务

   BOT服务对应前端的机器人问答页面，分析用户发来的聊天信息与提问信息并做出反馈。如果无法提供令人满意的回复，则会对问题进行包装转交给人工问答服务进行提问，并向用户反馈问题链接。

   1. 交互模块

      处理与用户聊天过程中比较简单的部分。对于可以不需要其他信息直接进行的对话与提问，由该模块负责，但如果遇到比较复杂的问题，或问题需要关联到其他信息，则将问题转交于执行模块处理。

   2. 执行模块

      处理从交互模块传递来的较为复杂的问题，通过对问题的分析并综合从数据层获取的数据给出反馈。同样，该模块如果也认为不能给出满意答复，则会再人工问答服务中创建问题。

3. 人工问答服务

   人工问答服务对应于前端的用户问答页面。

   人工问答服务提供的功能就与用户问答页面相对应，对于用户主动提出的问题、从BOT服务转发过来的经过包装的问题以及浏览问题信息、对问题做出解答，都由该服务负责处理。

   同时也需做好与与数据层的沟通。

#### 1.4 数据层

##### 1.4.1 承担的功能任务

数据层负责维护数据库以及关联外部资源。

根据服务层任务的不同，数据层的工作包括：

+ 根据服务层的指示更新数据库。
+ 从数据库中获取数据并提供给服务层。
+ 从关联的外部数据中获取数据并提供给服务层。

##### 1.4.2 包含的模块

1. 数据库

   储存所有内部数据。并提供典型的增删查改接口。

2. 外部资源

   所有可以关联到的外部数据的统称，主要是提供额外的补充信息。

#### 1.5 子系统（/子模块）之间的关系与工作模式

![modules](..\Images\modules.png)

## 三、功能的详细设计

## 四、数据库与API接口设计



## 五、系统的开发目标



### 1. 代码编写目标

### 2. 单元测试目标

### 3. 压力测试目标

### 4. 真实测试目标

### 5. 文档编写目标



